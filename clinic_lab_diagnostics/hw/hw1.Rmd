---
title: "Clinic laboratory diagnostic. HW1"
author: "Liliya"
date: "2022-11-22"
output: html_document
---

```{r setup, include=FALSE}

#install.packages("dplyr")
library(dplyr)

```


```{r}
data <- read.csv('diabetes.csv')
```

### 1. Оценка НТГ

У какого количества пациентов из датасета присутствует нарушенная 
толерантность к глюкозе (НТГ)? 
Критерий НТГ – это уровень повышение гликемии 
≥ 7.8 ммоль/л на 120 минуте теста на толерантность к глюкозе. Сколько в датасете 
пациентов, у которых нет НТГ?

```{r}
#Glucose
#1 ммоль/л = 18 мг/дл
#7.8 ммоль/л = 140,4 мг/дл

data <- data %>%
  mutate(ID = row_number())
ntg.high.n <- 0

for (i in 1:(length(data$ID))){
  if (data$Insulin[i] > 140.4){
    ntg.high.n <- ntg.high.n + 1
  }
}
paste("У", ntg.high.n, "пациентов из датасета присутствует нарушенная толерантность к глюкозе (НТГ)")

ntg.zero.n <- 0
for (i in 1:(length(data$ID))){
  if (data$Insulin[i] < 140.4){
    ntg.zero.n <- ntg.zero.n + 1
  }
}
paste("У", ntg.zero.n, "пациентов из датасета не нарушена толерантность к глюкозе (НТГ)")

```

### 2. ROC-кривая для предсказания сахарного диабета по уровню гликемии
Как выглядит ROC-кривая для предсказания сахарного диабета по переменной, 
характеризующей уровень гликемии? Постройте график.

```{r}

```

3. Оценка площади под ROC-кривой
4. 95% двусторонний ДИ для площади под ROC-кривой
5. Постройте ROC-кривую и определите, какое пороговое значение является оптимальным для предсказания сахарного диабета по уровню инсулина? Какой чувствительностью и специфичностью обладает данный порог?
6. Какая из количественных переменных в датасете обладает наибольшей площадью под ROC-кривой? Как вы можете интерпретировать это знание? Какая количественная переменная имеет наименьшую площадь?


